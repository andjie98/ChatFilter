# ChatFilter - é«˜æ€§èƒ½èŠå¤©è¿‡æ»¤æ’ä»¶

[![Minecraft](https://img.shields.io/badge/Minecraft-1.12.2+-green.svg)](https://www.spigotmc.org/)
[![Java](https://img.shields.io/badge/Java-8+-orange.svg)](https://www.oracle.com/java/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Build Status](https://img.shields.io/badge/Build-Passing-brightgreen.svg)](target/ChatFilter-1.0.0.jar)

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æ€§èƒ½ä¼˜ç§€çš„ Minecraft æœåŠ¡å™¨èŠå¤©è¿‡æ»¤æ’ä»¶ï¼Œä¸“ä¸ºä¸­æ–‡æœåŠ¡å™¨è®¾è®¡ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸš€ **é«˜æ€§èƒ½æ£€æµ‹**
- **Aho-Corasick ç®—æ³•**: ç›¸æ¯”ä¼ ç»Ÿæ–¹æ³•æ€§èƒ½æå‡ 10-100 å€
- **O(n+m) æ—¶é—´å¤æ‚åº¦**: æ”¯æŒå¤§é‡æ•æ„Ÿè¯çš„å®æ—¶æ£€æµ‹
- **æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒ**: çµæ´»çš„æ¨¡å¼åŒ¹é…åŠŸèƒ½

### ğŸ›¡ï¸ **ä¼ä¸šçº§å®‰å…¨**
- **çº¿ç¨‹å®‰å…¨**: ä½¿ç”¨ ConcurrentHashMap ç­‰å¹¶å‘å®‰å…¨æ•°æ®ç»“æ„
- **é…ç½®éªŒè¯**: å…¨é¢çš„é…ç½®æ–‡ä»¶æ ¼å¼éªŒè¯
- **å¼‚å¸¸å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

### ğŸ¯ **æ™ºèƒ½ç®¡ç†**
- **é˜¶æ¢¯å¤„ç½š**: æ ¹æ®è¿è§„æ¬¡æ•°æ‰§è¡Œä¸åŒçº§åˆ«çš„å¤„ç½š
- **é»‘åå•ç³»ç»Ÿ**: çµæ´»çš„ç©å®¶é»‘åå•ç®¡ç†
- **æ¯æ—¥é‡ç½®**: è‡ªåŠ¨é‡ç½®è¿è§„è®¡æ•°

### ğŸ‡¨ğŸ‡³ **å®Œæ•´ä¸­æ–‡åŒ–**
- **ä¸­æ–‡ç•Œé¢**: æ‰€æœ‰ç”¨æˆ·å¯è§æ¶ˆæ¯éƒ½ä½¿ç”¨ä¸­æ–‡
- **æ™ºèƒ½è¡¥å…¨**: å®Œæ•´çš„ Tab è¡¥å…¨åŠŸèƒ½
- **ç”¨æˆ·å‹å¥½**: æ¸…æ™°æ˜“æ‡‚çš„æ“ä½œæç¤º

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### å®‰è£…è¦æ±‚
- Minecraft æœåŠ¡å™¨ç‰ˆæœ¬: 1.12.2+
- æœåŠ¡å™¨ç±»å‹: Spigot / Paper
- Java ç‰ˆæœ¬: 8+
- **ä¾èµ–æ’ä»¶**: CMI (ç”¨äºç¦è¨€å’Œå°ç¦åŠŸèƒ½)

### å®‰è£…æ­¥éª¤
1. ä¸‹è½½ `ChatFilter-1.0.0.jar` æ–‡ä»¶
2. å°†æ–‡ä»¶æ”¾å…¥æœåŠ¡å™¨çš„ `plugins` æ–‡ä»¶å¤¹
3. é‡å¯æœåŠ¡å™¨æˆ–æ‰§è¡Œ `/reload` å‘½ä»¤
4. æ’ä»¶å°†è‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶å¹¶å¼€å§‹å·¥ä½œ

## ğŸ® å‘½ä»¤ä½¿ç”¨

### åŸºç¡€å‘½ä»¤
```
/chatfilter reload                    # é‡æ–°åŠ è½½é…ç½®
/chatfilter stats                     # æŸ¥çœ‹æ’ä»¶ç»Ÿè®¡
```

### æ•æ„Ÿè¯ç®¡ç†
```
/chatfilter addword <è¯è¯­>            # æ·»åŠ æ•æ„Ÿè¯
/chatfilter removeword <è¯è¯­>         # åˆ é™¤æ•æ„Ÿè¯
/chatfilter listwords                 # æŸ¥çœ‹æ•æ„Ÿè¯åˆ—è¡¨
/chatfilter test <æ¶ˆæ¯>               # æµ‹è¯•æ¶ˆæ¯æ£€æµ‹
```

### é»‘åå•ç®¡ç†
```
/chatfilter addblacklist <ç©å®¶>       # æ·»åŠ é»‘åå•ç©å®¶
/chatfilter removeblacklist <ç©å®¶>    # åˆ é™¤é»‘åå•ç©å®¶
/chatfilter listblacklist             # æŸ¥çœ‹é»‘åå•åˆ—è¡¨
```

### è¿è§„ç®¡ç†
```
/chatfilter violations [ç©å®¶]         # æŸ¥çœ‹è¿è§„ç»Ÿè®¡
/chatfilter resetviolations [ç©å®¶]    # é‡ç½®è¿è§„è®°å½•
/chatfilter resetviolations all      # é‡ç½®æ‰€æœ‰è¿è§„è®°å½•
```

## âš™ï¸ é…ç½®è¯´æ˜

### ä¸»é…ç½®æ–‡ä»¶ (config.yml)
```yaml
# æ’ä»¶åŸºæœ¬è®¾ç½®
enabled: true                         # æ˜¯å¦å¯ç”¨æ’ä»¶

# æ£€æµ‹è®¾ç½®
detection-settings:
  use-regex: false                     # æ˜¯å¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼
  case-sensitive: false                # æ˜¯å¦åŒºåˆ†å¤§å°å†™

# å¤„ç½šé˜¶æ¢¯ (ä½¿ç”¨ CMI æ’ä»¶å‘½ä»¤)
punishment-stages:
  1:
    warning-message: "&e[&cç¬¬1æ¬¡è­¦å‘Š&e] &fè¯·æ–‡æ˜èŠå¤©! æ£€æµ‹åˆ°æ•æ„Ÿè¯: &c%word%"
    commands:
      - "cmi broadcast &e[&6èŠå¤©ç›‘æ§&e] &fç©å®¶ &c%player% &fä½¿ç”¨äº†ä¸å½“è¨€è¾ï¼Œè¯·å¤§å®¶æ–‡æ˜èŠå¤©"
  2:
    warning-message: "&e[&cç¬¬2æ¬¡è­¦å‘Š&e] &fæ‚¨å·²è¢«ç¦è¨€ &c10åˆ†é’Ÿ&f! æ•æ„Ÿè¯: &c%word%"
    commands:
      - "cmi mute %player% 10m -s ä½¿ç”¨æ•æ„Ÿè¯: %word%"
      - "cmi msg %player% &cæ‚¨å› ä½¿ç”¨æ•æ„Ÿè¯è¢«ç¦è¨€10åˆ†é’Ÿï¼Œè¯·åæ€åæ–‡æ˜èŠå¤©"
  5:
    warning-message: "&e[&4ä¸¥é‡è­¦å‘Š&e] &fæ‚¨å·²è¢«ä¸´æ—¶å°ç¦ &41å¤©&f! æ•æ„Ÿè¯: &c%word%"
    commands:
      - "cmi tempban %player% 1d -s å±¡æ¬¡è¿è§„ä½¿ç”¨æ•æ„Ÿè¯"
      - "cmi broadcast &4[&cå°ç¦é€šçŸ¥&4] &fç©å®¶ &c%player% &få› å±¡æ¬¡è¿è§„è¢«ä¸´æ—¶å°ç¦1å¤©"

# CMI é›†æˆè®¾ç½®
cmi-integration:
  enabled: true                        # å¯ç”¨ CMI é›†æˆ
  send-private-message: true           # å‘é€ç§ä¿¡é€šçŸ¥
  broadcast-serious-violations: true   # å¹¿æ’­ä¸¥é‡è¿è§„
  serious-violation-threshold: 5       # ä¸¥é‡è¿è§„é˜ˆå€¼

# æ—¥å¿—è®¾ç½®
log-settings:
  level: "INFO"                        # æ—¥å¿—çº§åˆ«
  file-logging: true                   # æ˜¯å¦è¾“å‡ºåˆ°æ–‡ä»¶
  log-file: "logs/chatfilter.log"      # æ—¥å¿—æ–‡ä»¶è·¯å¾„
```

### æ•æ„Ÿè¯é…ç½® (words.yml)
```yaml
sensitive-words:
  - "æ•æ„Ÿè¯1"
  - "æ•æ„Ÿè¯2"
  - "æ­£åˆ™.*è¡¨è¾¾å¼"                     # æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼
```

### é»‘åå•é…ç½® (blacklist.yml)
```yaml
blacklist-players:
  - "ç®¡ç†å‘˜"
  - "VIPç©å®¶"
```

## ğŸ”§ æƒé™è®¾ç½®

```yaml
permissions:
  chatfilter.admin: true               # ç®¡ç†å‘˜æƒé™
  chatfilter.reload: true              # é‡è½½æƒé™
  chatfilter.manage: true              # ç®¡ç†æƒé™
  chatfilter.test: true                # æµ‹è¯•æƒé™
  chatfilter.stats: true               # ç»Ÿè®¡æƒé™
```

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ **æ™ºèƒ½æ£€æµ‹**
- **å¤šæ¨¡å¼åŒ¹é…**: æ”¯æŒå­—ç¬¦ä¸²åŒ¹é…å’Œæ­£åˆ™è¡¨è¾¾å¼
- **å¤§å°å†™æ§åˆ¶**: å¯é…ç½®æ˜¯å¦åŒºåˆ†å¤§å°å†™
- **å®æ—¶æ£€æµ‹**: æ¯«ç§’çº§å“åº”æ—¶é—´

### ğŸ“ **æ—¥å¿—ç³»ç»Ÿ**
- **åˆ†çº§æ—¥å¿—**: TRACEã€DEBUGã€INFOã€WARNINGã€ERROR
- **æ–‡ä»¶è¾“å‡º**: å¯é…ç½®çš„æ—¥å¿—æ–‡ä»¶è®°å½•
- **æ ¼å¼åŒ–**: ç»Ÿä¸€çš„æ—¶é—´æˆ³å’Œæ ¼å¼

### ğŸ”„ **è‡ªåŠ¨åŒ–åŠŸèƒ½**
- **æ¯æ—¥é‡ç½®**: è‡ªåŠ¨é‡ç½®è¿è§„è®¡æ•°
- **å†…å­˜æ¸…ç†**: è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ•°æ®
- **é…ç½®çƒ­é‡è½½**: æ— éœ€é‡å¯å³å¯æ›´æ–°é…ç½®

### ğŸ“ˆ **ç»Ÿè®¡ç›‘æ§**
- **å®æ—¶ç»Ÿè®¡**: è¿è§„æ¬¡æ•°ã€æ•æ„Ÿè¯æ•°é‡ç­‰
- **å†å²è®°å½•**: å®Œæ•´çš„è¿è§„å†å²è¿½è¸ª
- **æ€§èƒ½ç›‘æ§**: æ’ä»¶è¿è¡ŒçŠ¶æ€ç›‘æ§

## ğŸ› ï¸ å¼€å‘ä¿¡æ¯

### æŠ€æœ¯æ ˆ
- **è¯­è¨€**: Java 8
- **æ¡†æ¶**: Bukkit/Spigot API
- **æ„å»ºå·¥å…·**: Maven
- **ç®—æ³•**: Aho-Corasick å­—ç¬¦ä¸²åŒ¹é…

### é¡¹ç›®ç»“æ„
```
src/main/java/com/laoda/chatfilter/
â”œâ”€â”€ ChatFilter.java                   # ä¸»æ’ä»¶ç±»
â”œâ”€â”€ algorithm/
â”‚   â””â”€â”€ AhoCorasick.java             # é«˜æ•ˆå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•
â”œâ”€â”€ config/
â”‚   â””â”€â”€ ConfigValidator.java         # é…ç½®éªŒè¯å™¨
â”œâ”€â”€ i18n/
â”‚   â””â”€â”€ Messages.java               # ä¸­æ–‡æ¶ˆæ¯ç®¡ç†
â”œâ”€â”€ logging/
â”‚   â””â”€â”€ ChatFilterLogger.java       # æ—¥å¿—ç³»ç»Ÿ
â””â”€â”€ util/
    â””â”€â”€ ViolationCounter.java        # è¿è§„è®¡æ•°å™¨
```

### æ€§èƒ½æŒ‡æ ‡
- **æ£€æµ‹å»¶è¿Ÿ**: < 1ms
- **å†…å­˜å ç”¨**: < 50MB
- **CPU ä½¿ç”¨**: < 1%
- **å¹¶å‘æ”¯æŒ**: 1000+ ç©å®¶

## ğŸ“„ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025/10/3)
- âœ… å®ç° Aho-Corasick é«˜æ€§èƒ½å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•
- âœ… æ·»åŠ å®Œæ•´çš„çº¿ç¨‹å®‰å…¨æœºåˆ¶
- âœ… å®ç°é…ç½®æ–‡ä»¶éªŒè¯ç³»ç»Ÿ
- âœ… æ·»åŠ åˆ†çº§æ—¥å¿—ç³»ç»Ÿ
- âœ… å®Œæ•´çš„ä¸­æ–‡æœ¬åœ°åŒ–
- âœ… æ™ºèƒ½ Tab è¡¥å…¨åŠŸèƒ½
- âœ… é˜¶æ¢¯å¤„ç½šç³»ç»Ÿ
- âœ… é»‘åå•ç®¡ç†åŠŸèƒ½
- âœ… è¿è§„ç»Ÿè®¡å’Œé‡ç½®åŠŸèƒ½
- âœ… é…ç½®çƒ­é‡è½½æ”¯æŒ

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘ç¯å¢ƒ
1. JDK 8+
2. Maven 3.6+
3. IDE (æ¨è IntelliJ IDEA)

### æ„å»ºé¡¹ç›®
```bash
git clone <repository-url>
cd ChatFilter
mvn clean compile package
```

## ğŸ“ æ”¯æŒä¸åé¦ˆ

- **ä½œè€…**: laoda
- **ç‰ˆæœ¬**: 1.0.0
- **å…¼å®¹æ€§**: Minecraft 1.12.2+
- **è®¸å¯è¯**: MIT License

## â­ ç‰¹åˆ«æ„Ÿè°¢
laoda
æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

**ChatFilter - è®©ä½ çš„æœåŠ¡å™¨èŠå¤©ç¯å¢ƒæ›´åŠ å¥åº·ï¼** ğŸ‰